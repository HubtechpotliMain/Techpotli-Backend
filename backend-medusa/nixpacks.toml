providers = ["node"]

# Railway/Nixpacks already runs an "install" phase and a "build" phase.
# Don't run `npm ci` twice (it can easily exceed build time limits).

[phases.install]
cmds = ["npm ci --no-audit --no-fund"]

[phases.build]
cmds = ["npm run build"]

# Railway assigns PORT; Medusa must listen on 0.0.0.0 for healthcheck to succeed
[start]
cmd = "HOST=0.0.0.0 npm run start"

